{"version":3,"sources":["components/Tree/Tree.tsx"],"names":["treeClassName","useStableProps","props","stableProps","React","useRef","useEffect","current","expandedItemsGenerator","items","acc","item","indexOf","push","iterateItems","Tree","context","displayName","telemetry","setStart","setEnd","exclusive","renderItemTitle","selectable","children","renderedItems","className","design","styles","variables","ElementType","unhandledProps","handledProps","defaultValue","defaultActiveItemIds","value","activeItemIds","initialValue","setActiveItemIdsState","defaultSelectedItemIds","selectedItemIds","setSelectedItemIdsState","getA11yProps","accessibility","debugName","rtl","mapPropsToInlineStyles","classes","treeRef","itemsRef","Map","onFocusParent","useCallback","parent","parentRef","get","focus","setSelectedItemIds","e","updateSelectedItemIds","setActiveItemIds","updateActiveItemIds","expandItems","treeItemProps","id","currActiveItemIds","siblings","activeItemIdIndex","nextActiveItemsIds","some","sibling","activeSiblingIdIndex","onTitleClick","executeSelection","treeItemHasSubtree","selectableParent","expanded","currSelectedItemIds","onFocusFirstChild","itemId","currentElement","elementToBeFocused","isActiveItem","onSiblingsExpand","forEach","isIndeterminate","selectableItemIds","isSelectedItem","contextValue","useMemo","renderContent","renderItems","level","reduce","index","isSubtree","isSubtreeExpanded","indeterminate","has","set","createRef","renderedItem","TreeItem","create","defaultProps","selected","key","contentRef","treeSize","length","itemsRendered","element","unstable_wrapWithFocusZone","root","rtlTextContainer","getAttributes","forElements","propTypes","commonPropTypes","createCommon","content","customPropTypes","collectionShorthand","PropTypes","bool","collectionObjectShorthand","onActiveItemIdsChange","func","onSelectedItemIdsChange","Item","Title","TreeTitle","treeBehavior","Object","keys","Component","mappedArrayProp"],"mappings":"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","sourcesContent":["import { Accessibility, treeBehavior, TreeBehaviorProps } from '@fluentui/accessibility';\nimport {\n  ComponentWithAs,\n  getNextElement,\n  useAutoControlled,\n  useTelemetry,\n  useUnhandledProps,\n  getElementType,\n  useAccessibility,\n  useStyles,\n  useFluentContext,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport { Ref } from '@fluentui/react-component-ref';\nimport { TreeItem, TreeItemProps } from './TreeItem';\nimport { TreeTitle, TreeTitleProps } from './TreeTitle';\nimport {\n  childrenExist,\n  commonPropTypes,\n  createShorthandFactory,\n  UIComponentProps,\n  ChildrenComponentProps,\n  rtlTextContainer,\n} from '../../utils';\nimport {\n  ShorthandRenderFunction,\n  ShorthandCollection,\n  ComponentEventHandler,\n  ObjectShorthandCollection,\n  FluentComponentStaticProps,\n} from '../../types';\nimport {\n  getAllSelectableChildrenId,\n  isAllGroupChecked,\n  hasSubtree,\n  removeItemAtIndex,\n  getSiblings,\n  TreeContext,\n  TreeRenderContextValue,\n  processItemsForSelection,\n} from './utils';\n\nexport interface TreeProps extends UIComponentProps, ChildrenComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<TreeBehaviorProps>;\n\n  /** Ids of expanded items. */\n  activeItemIds?: string[];\n\n  /** Ids of selected items. */\n  selectedItemIds?: string[];\n\n  /** Initial activeItemIds value. */\n  defaultActiveItemIds?: string[];\n\n  /** Initial selectedItemIds value. */\n  defaultSelectedItemIds?: string[];\n\n  /** Only allow one subtree to be expanded at a time. */\n  exclusive?: boolean;\n\n  /** Shorthand array of props for Tree. */\n  items?: ObjectShorthandCollection<TreeItemProps>;\n\n  /**\n   * A custom render function for the title slot.\n   *\n   * @param Component - The computed component for this slot.\n   * @param props - The computed props for this slot.\n   * @param children - The computed children for this slot.\n   */\n  renderItemTitle?: ShorthandRenderFunction<TreeTitleProps>;\n\n  /**\n   * Called when active item ids change.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props, with `activeItemIds` reflecting the new state.\n   */\n  onActiveItemIdsChange?: ComponentEventHandler<TreeProps>;\n\n  /**\n   * Called when tree item selection state is changed.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props, with `selectedItemIds` reflecting the new state.\n   */\n  onSelectedItemIdsChange?: ComponentEventHandler<TreeProps>;\n\n  /**\n   * Callback that provides rendered tree items to be used by react-virtualized for instance.\n   * Acts as a render prop, with the rendered tree items being the re-used logic.\n   *\n   * @param renderedItem - The array of rendered items.\n   * @returns The render prop result.\n   */\n  renderedItems?: (renderedItems: React.ReactElement[]) => React.ReactNode;\n\n  /** Whether or not tree items are selectable. */\n  selectable?: boolean;\n}\n\nexport interface TreeItemForRenderProps {\n  elementRef: React.RefObject<HTMLElement>;\n  id: string;\n  index: number;\n  level: number;\n  parent: string;\n  siblings: ShorthandCollection<TreeItemProps>;\n}\n\nexport const treeClassName = 'ui-tree';\n\nexport type TreeStylesProps = never;\n\nfunction useStableProps<P>(props: P) {\n  const stableProps = React.useRef<P>(props);\n\n  React.useEffect(() => {\n    stableProps.current = props;\n  });\n\n  return stableProps;\n}\n\nconst expandedItemsGenerator = (items: TreeProps['items'] | TreeItemProps['items'], acc = []) =>\n  _.reduce(\n    items,\n    (acc, item) => {\n      if (item['expanded'] && acc.indexOf(item['id']) === -1) {\n        acc.push(item['id']);\n      }\n\n      if (item['items']) {\n        return expandedItemsGenerator(item['items'], acc);\n      }\n\n      return acc;\n    },\n    acc,\n  );\n\nconst iterateItems = (items: TreeProps['items'] | TreeItemProps['items'], acc = []): string[] =>\n  _.reduce<TreeProps['items'] | TreeItemProps['items'], string[]>(\n    items,\n    (acc, item) => {\n      if (item['selected'] && acc.indexOf(item['id']) === -1) {\n        acc.push(item['id']);\n      }\n\n      if (item['items']) {\n        return iterateItems(item['items']);\n      }\n\n      return acc;\n    },\n    acc,\n  );\n\n/**\n * A Tree displays data organised in tree hierarchy.\n *\n * @accessibility\n * Implements [ARIA TreeView](https://www.w3.org/TR/wai-aria-practices-1.1/#TreeView) design pattern.\n * @accessibilityIssues\n * [Treeview - JAWS doesn't narrate position for each tree item](https://github.com/FreedomScientific/VFO-standards-support/issues/338)\n * [Aria compliant trees are read as empty tables](https://bugs.chromium.org/p/chromium/issues/detail?id=1048770)\n */\nexport const Tree: ComponentWithAs<'div', TreeProps> &\n  FluentComponentStaticProps<TreeProps> & {\n    Item: typeof TreeItem;\n    Title: typeof TreeTitle;\n  } = props => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(Tree.displayName, context.telemetry);\n  setStart();\n\n  const {\n    exclusive,\n    items,\n    renderItemTitle,\n    selectable,\n    children,\n    renderedItems,\n    className,\n    design,\n    styles,\n    variables,\n  } = props;\n  const stableProps = useStableProps(props);\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Tree.handledProps, props);\n\n  const [activeItemIds, setActiveItemIdsState] = useAutoControlled<string[]>({\n    defaultValue: props.defaultActiveItemIds,\n    value: props.activeItemIds,\n    initialValue: expandedItemsGenerator(items),\n  });\n\n  const [selectedItemIds, setSelectedItemIdsState] = useAutoControlled<string[]>({\n    defaultValue: props.defaultSelectedItemIds,\n    value: props.selectedItemIds,\n    initialValue: iterateItems(items),\n  });\n\n  const getA11yProps = useAccessibility(props.accessibility, {\n    debugName: Tree.displayName,\n    rtl: context.rtl,\n  });\n\n  const { classes } = useStyles<TreeStylesProps>(Tree.displayName, {\n    className: treeClassName,\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const treeRef = React.useRef<HTMLElement>();\n  const itemsRef = React.useRef(new Map<string, React.RefObject<HTMLElement>>());\n\n  const onFocusParent = React.useCallback(\n    (parent: string) => {\n      const parentRef = itemsRef.current.get(parent);\n\n      if (!parentRef || !parentRef.current) {\n        return;\n      }\n\n      parentRef.current.focus();\n    },\n    [itemsRef],\n  );\n\n  const setSelectedItemIds = React.useCallback(\n    (e: React.SyntheticEvent, updateSelectedItemIds: (currSelectedItemIds: string[]) => string[]) => {\n      _.invoke(stableProps.current, 'onSelectedItemIdsChange', e, {\n        ...stableProps.current,\n        selectedItemIds: updateSelectedItemIds,\n      });\n\n      setSelectedItemIdsState(updateSelectedItemIds);\n    },\n    [stableProps, setSelectedItemIdsState],\n  );\n\n  const setActiveItemIds = React.useCallback(\n    (e: React.SyntheticEvent, updateActiveItemIds: (activeItemIds: string[]) => string[]) => {\n      _.invoke(stableProps.current, 'onActiveItemIdsChange', e, {\n        ...stableProps.current,\n        activeItemIds: updateActiveItemIds,\n      });\n      setActiveItemIdsState(updateActiveItemIds);\n    },\n    [stableProps, setActiveItemIdsState],\n  );\n\n  const expandItems = React.useCallback(\n    (e: React.SyntheticEvent, treeItemProps: TreeItemProps) => {\n      const { id } = treeItemProps;\n\n      setActiveItemIds(e, currActiveItemIds => {\n        const siblings = getSiblings(stableProps.current.items, id);\n        const activeItemIdIndex = currActiveItemIds.indexOf(id);\n        let nextActiveItemsIds = currActiveItemIds;\n        if (activeItemIdIndex > -1) {\n          nextActiveItemsIds = removeItemAtIndex(currActiveItemIds, activeItemIdIndex);\n        } else {\n          if (exclusive) {\n            siblings.some(sibling => {\n              const activeSiblingIdIndex = currActiveItemIds.indexOf(sibling['id']);\n              if (activeSiblingIdIndex > -1) {\n                nextActiveItemsIds = removeItemAtIndex(currActiveItemIds, activeSiblingIdIndex);\n                return true;\n              }\n              return false;\n            });\n          }\n          nextActiveItemsIds = [...nextActiveItemsIds, id];\n        }\n        return nextActiveItemsIds;\n      });\n    },\n    [stableProps, setActiveItemIds, exclusive],\n  );\n\n  const onTitleClick = React.useCallback(\n    (e: React.SyntheticEvent, treeItemProps: TreeItemProps, executeSelection: boolean = false) => {\n      const treeItemHasSubtree = hasSubtree(treeItemProps);\n\n      if (!treeItemProps) {\n        return;\n      }\n\n      if (treeItemHasSubtree && !executeSelection) {\n        expandItems(e, treeItemProps);\n      }\n\n      if (treeItemProps.selectable) {\n        // parent must be selectable and expanded in order to procced with selection, otherwise return\n        if (treeItemHasSubtree && !(treeItemProps.selectableParent && treeItemProps.expanded)) {\n          return;\n        }\n\n        if (treeItemHasSubtree && !executeSelection) {\n          return;\n        }\n\n        setSelectedItemIds(e, currSelectedItemIds => processItemsForSelection(treeItemProps, currSelectedItemIds));\n      }\n    },\n    [expandItems, setSelectedItemIds],\n  );\n\n  const onFocusFirstChild = React.useCallback(\n    (itemId: string) => {\n      const currentElement = itemsRef.current.get(itemId);\n\n      if (!currentElement || !currentElement.current) {\n        return;\n      }\n\n      const elementToBeFocused = getNextElement(treeRef.current, currentElement.current);\n\n      if (!elementToBeFocused) {\n        return;\n      }\n\n      elementToBeFocused.focus();\n    },\n    [treeRef, itemsRef],\n  );\n\n  const isActiveItem = React.useCallback(\n    (id: string): boolean => {\n      return activeItemIds.indexOf(id) > -1;\n    },\n    [activeItemIds],\n  );\n\n  const onSiblingsExpand = React.useCallback(\n    (e: React.SyntheticEvent, treeItemProps: TreeItemProps) => {\n      if (exclusive) {\n        return;\n      }\n\n      const { id } = treeItemProps;\n      const siblings = getSiblings(stableProps.current.items, id);\n\n      setActiveItemIds(e, currActiveItemIds => {\n        const nextActiveItemsIds = [...currActiveItemIds];\n\n        siblings.forEach(sibling => {\n          if (hasSubtree(sibling) && !isActiveItem(sibling['id'])) {\n            nextActiveItemsIds.push(sibling['id']);\n          }\n        });\n\n        if (hasSubtree(treeItemProps) && !isActiveItem(id)) {\n          nextActiveItemsIds.push(id);\n        }\n        return nextActiveItemsIds;\n      });\n    },\n    [exclusive, stableProps, isActiveItem, setActiveItemIds],\n  );\n\n  const isIndeterminate = (item: TreeItemProps) => {\n    if (!item.selectableParent || !item.items) {\n      return false;\n    }\n\n    const selectableItemIds = getAllSelectableChildrenId(item.items as TreeItemProps[]);\n\n    return (\n      !isAllGroupChecked(item.items as TreeItemProps[], selectedItemIds) &&\n      selectableItemIds.some(id => selectedItemIds.indexOf(id) > -1)\n    );\n  };\n\n  const isSelectedItem = (item: TreeItemProps): boolean => {\n    if (item.selectableParent && item.items) {\n      return isAllGroupChecked(item.items as TreeItemProps[], selectedItemIds);\n    }\n\n    return selectedItemIds && selectedItemIds.indexOf(item.id) > -1;\n  };\n\n  const contextValue: TreeRenderContextValue = React.useMemo(\n    () => ({\n      onFocusParent,\n      onSiblingsExpand,\n      onFocusFirstChild,\n      onTitleClick,\n    }),\n    [onFocusParent, onSiblingsExpand, onFocusFirstChild, onTitleClick],\n  );\n\n  const renderContent = (): React.ReactElement[] => {\n    if (!items) return null;\n\n    const renderItems = (items: TreeItemProps[], level = 1, parent?: string): React.ReactElement[] => {\n      return items.reduce((renderedItems: React.ReactElement[], item: TreeItemProps, index: number) => {\n        const id = item.id;\n        const isSubtree = hasSubtree(item);\n        const isSubtreeExpanded = isSubtree && isActiveItem(id);\n\n        const indeterminate = isIndeterminate(item);\n\n        if (!itemsRef.current.has(id)) {\n          itemsRef.current.set(id, React.createRef<HTMLElement>());\n        }\n\n        const renderedItem = TreeItem.create(item, {\n          defaultProps: () =>\n            getA11yProps('item', {\n              expanded: isSubtreeExpanded,\n              selected: isSelectedItem(item),\n              selectable,\n              renderItemTitle,\n              id,\n              key: id,\n              parent,\n              level,\n              index: index + 1, // Used for aria-posinset and it's 1-based.\n              contentRef: itemsRef.current.get(id),\n              treeSize: items.length,\n              indeterminate,\n              onSiblingsExpand,\n            }),\n        });\n\n        return [\n          ...renderedItems,\n          renderedItem,\n          ...(isSubtreeExpanded ? renderItems(item.items as TreeItemProps[], level + 1, id) : ([] as any)),\n        ];\n      }, []);\n    };\n    const itemsRendered = renderItems(items as TreeItemProps[]);\n\n    return itemsRendered;\n  };\n\n  const element = (\n    <TreeContext.Provider value={contextValue}>\n      <Ref innerRef={treeRef}>\n        {getA11yProps.unstable_wrapWithFocusZone(\n          <ElementType\n            {...getA11yProps('root', {\n              className: classes.root,\n              ...rtlTextContainer.getAttributes({ forElements: [children] }),\n              ...unhandledProps,\n            })}\n          >\n            {childrenExist(children) ? children : renderedItems ? renderedItems(renderContent()) : renderContent()}\n          </ElementType>,\n        )}\n      </Ref>\n    </TreeContext.Provider>\n  );\n  setEnd();\n  return element;\n};\n\nTree.displayName = 'Tree';\n\nTree.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  activeItemIds: customPropTypes.collectionShorthand,\n  selectedItemIds: customPropTypes.collectionShorthand,\n  defaultActiveItemIds: customPropTypes.collectionShorthand,\n  defaultSelectedItemIds: customPropTypes.collectionShorthand,\n  exclusive: PropTypes.bool,\n  selectable: PropTypes.bool,\n  items: customPropTypes.collectionObjectShorthand,\n  onActiveItemIdsChange: PropTypes.func,\n  onSelectedItemIdsChange: PropTypes.func,\n  renderItemTitle: PropTypes.func,\n  renderedItems: PropTypes.func,\n};\n\nTree.Item = TreeItem;\nTree.Title = TreeTitle;\n\nTree.defaultProps = {\n  accessibility: treeBehavior,\n};\n\nTree.handledProps = Object.keys(Tree.propTypes) as any;\n\nTree.create = createShorthandFactory({\n  Component: Tree,\n  mappedArrayProp: 'items',\n});\n"],"file":"Tree.js"}