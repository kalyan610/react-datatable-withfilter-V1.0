{"version":3,"file":"mergeComposeOptions.js","sourceRoot":"../src/","sources":["mergeComposeOptions.ts"],"names":[],"mappings":";;;AACA,6DAA4D;AAC5D,iEAAgE;AAEhE,SAAgB,mBAAmB,CACjC,KAAY,EACZ,YAA4B,EAC5B,aAAuE;IAAvE,8BAAA,EAAA,gBAAkD,6CAAqB;IAEvE,IAAM,wBAAwB,GAAG,YAAY,CAAC,SAAS;QACrD,CAAC,wBAAK,aAAa,CAAC,SAAS,GAAE,YAAY,CAAC,SAAS,GACrD,CAAC,CAAC,aAAa,CAAC,SAAS,CAAC;IAE5B,IAAM,gBAAgB,GAAG,UAAS,KAAQ;QACxC,OAAA,wBAAwB,CAAC,MAAM,CAAyB,UAAC,GAAG,EAAE,UAAU;YACtE,IAAM,SAAS,wBAAQ,UAAU,CAAC,KAAK,CAAC,CAAE,CAAC;YAC3C,IAAM,KAAK,0BAAiB,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,EAAK,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YACzE,IAAM,eAAe,GAA2B,EAAE,CAAC;YAEnD,KAAK,CAAC,OAAO,CAAC,UAAA,IAAI;gBAChB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE;oBAC1B,eAAe,CAAC,IAAI,CAAC,yCAChB,GAAG,CAAC,IAAI,CAAC,GACT,SAAS,CAAC,IAAI,CAAC,CACnB,CAAC;iBACH;YACH,CAAC,CAAC,CAAC;YAEH,OAAO,eAAe,CAAC;QACzB,CAAC,EAAE,EAAE,CAAC;IAfN,CAeM,CAAC;IAET,IAAM,YAAY,GAAG,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;IAEzG,IAAM,KAAK,GAAoC,UAAC,KAAK,EAAE,GAAG,EAAE,OAAO;QACjE,IAAI,YAAY,CAAC,KAAK,EAAE;YACtB,OAAO,YAAY,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,EAAE,OAAO,CAAC,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC;SACnF;QAED,OAAO,aAAa,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC;IAClD,CAAC,CAAC;IAEF,OAAO;QACL,SAAS,EAAE,YAAY,CAAC,SAAS,IAAI,aAAa,CAAC,SAAS;QAC5D,OAAO,yBAAM,aAAa,CAAC,OAAO,EAAK,YAAY,CAAC;QAEpD,WAAW,EAAE,YAAY,CAAC,WAAW,IAAI,aAAa,CAAC,WAAW;QAClE,YAAY,EAAE,yCAAmB,CAAC,YAAY,EAAE,aAAa,CAAC;QAE9D,0BAA0B,EAAE,YAAY,CAAC,qBAAqB;YAC5D,CAAC,wBAAK,aAAa,CAAC,0BAA0B,GAAE,YAAY,CAAC,qBAAqB,GAClF,CAAC,CAAC,aAAa,CAAC,0BAA0B;QAE5C,MAAM,EAAE,OAAO,KAAK,KAAK,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,aAAa,CAAC,MAAM;QAElE,YAAY,yBAAM,aAAa,CAAC,YAAY,EAAK,CAAE,YAAY,CAAC,YAAwB,IAAK,EAAc,CAAC,CAAC;QAE7G,cAAc,EAAE,YAAY,CAAC,cAAc,IAAI,KAAK;QAEpD,KAAK,wCACA,aAAa,CAAC,KAAK,GACnB,YAAY,CAAC,KAAK,CACtB;QAED,SAAS,EAAE,wBAAwB;QAEnC,KAAK,OAAA;QAEL,gBAAgB,kBAAA;QAEhB,eAAe,wCACV,aAAa,CAAC,eAAe,GAC7B,YAAY,CAAC,eAAe,CAChC;KACF,CAAC;AACJ,CAAC;AAtED,kDAsEC","sourcesContent":["import { ComposeOptions, ComposePreparedOptions, Input } from './types';\nimport { computeDisplayNames } from './computeDisplayNames';\nimport { defaultComposeOptions } from './defaultComposeOptions';\n\nexport function mergeComposeOptions(\n  input: Input,\n  inputOptions: ComposeOptions,\n  parentOptions: Required<ComposePreparedOptions> = defaultComposeOptions,\n): Required<ComposePreparedOptions> {\n  const mapPropsToSlotPropsChain = inputOptions.slotProps\n    ? [...parentOptions.slotProps, inputOptions.slotProps]\n    : parentOptions.slotProps;\n\n  const resolveSlotProps = <P = {}>(props: P) =>\n    mapPropsToSlotPropsChain.reduce<Record<string, object>>((acc, definition) => {\n      const nextProps = { ...definition(props) };\n      const slots: string[] = [...Object.keys(acc), ...Object.keys(nextProps)];\n      const mergedSlotProps: Record<string, object> = {};\n\n      slots.forEach(slot => {\n        if (!mergedSlotProps[slot]) {\n          mergedSlotProps[slot] = {\n            ...acc[slot],\n            ...nextProps[slot],\n          };\n        }\n      });\n\n      return mergedSlotProps;\n    }, {});\n\n  const inputClasses = Array.isArray(inputOptions.classes) ? inputOptions.classes : [inputOptions.classes];\n\n  const state: ComposePreparedOptions['state'] = (props, ref, options) => {\n    if (inputOptions.state) {\n      return inputOptions.state(parentOptions.state(props, ref, options), ref, options);\n    }\n\n    return parentOptions.state(props, ref, options);\n  };\n\n  return {\n    className: inputOptions.className || parentOptions.className,\n    classes: [...parentOptions.classes, ...inputClasses],\n\n    displayName: inputOptions.displayName || parentOptions.displayName,\n    displayNames: computeDisplayNames(inputOptions, parentOptions),\n\n    mapPropsToStylesPropsChain: inputOptions.mapPropsToStylesProps\n      ? [...parentOptions.mapPropsToStylesPropsChain, inputOptions.mapPropsToStylesProps]\n      : parentOptions.mapPropsToStylesPropsChain,\n\n    render: typeof input === 'function' ? input : parentOptions.render,\n\n    handledProps: [...parentOptions.handledProps, ...((inputOptions.handledProps as never[]) || ([] as never[]))],\n\n    overrideStyles: inputOptions.overrideStyles || false,\n\n    slots: {\n      ...parentOptions.slots,\n      ...inputOptions.slots,\n    },\n\n    slotProps: mapPropsToSlotPropsChain,\n\n    state,\n\n    resolveSlotProps,\n\n    shorthandConfig: {\n      ...parentOptions.shorthandConfig,\n      ...inputOptions.shorthandConfig,\n    },\n  };\n}\n"]}